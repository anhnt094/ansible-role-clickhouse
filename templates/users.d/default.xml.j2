{%- if clickhouse_config_format == 'xml' -%}
<?xml version="1.0"?>
<!--
  Default User Configuration
  Generated by Ansible - ansible-role-clickhouse
-->
<clickhouse>
    <users>
        <default>
            <!-- Password: empty (no password required from allowed networks) -->
            <password></password>
            
            <!-- Network access restrictions -->
            <networks>
{% for network in clickhouse_default_user_networks %}
                <ip>{{ network }}</ip>
{% endfor %}
            </networks>
            
            <!-- Enable access management for default user -->
            <access_management>1</access_management>
            
            <!-- Named collections permissions -->
            <named_collection_control>1</named_collection_control>
            <show_named_collections>1</show_named_collections>
            <show_named_collections_secrets>1</show_named_collections_secrets>
        </default>
    </users>
</clickhouse>
{%- elif clickhouse_config_format == 'yaml' -%}
# Default User Configuration
# Generated by Ansible - ansible-role-clickhouse

users:
  default:
    # Password: empty (no password required from allowed networks)
    password: ""
    
    # Network access restrictions
    networks:
{% for network in clickhouse_default_user_networks %}
      - {{ network }}
{% endfor %}
    
    # Enable access management for default user
    access_management: 1
    
    # Named collections permissions
    named_collection_control: 1
    show_named_collections: 1
    show_named_collections_secrets: 1
{%- endif -%}

