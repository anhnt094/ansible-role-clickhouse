{%- if clickhouse_config_format == 'xml' -%}
<?xml version="1.0"?>
<!--
  Server Configuration
  Generated by Ansible - ansible-role-clickhouse
  Best Practice: Keep default config.xml unchanged, add customizations in config.d/
-->
<clickhouse>
    <!-- Maximum number of simultaneously processed requests -->
    <max_concurrent_queries>{{ clickhouse_max_concurrent_queries }}</max_concurrent_queries>

    <!-- Number of threads to handle async inserts -->
    <async_insert_threads>{{ clickhouse_async_insert_threads }}</async_insert_threads>

    <!-- Number of threads to perform background operations (merges, mutations, fetches) -->
    <background_pool_size>{{ clickhouse_background_pool_size }}</background_pool_size>

    <!-- Maximum number of inbound connections -->
    <max_connections>{{ clickhouse_max_connections }}</max_connections>

    <!-- Log level. Acceptable values: none, fatal, critical, error, warning, notice, information, debug, trace, test -->
    <logger>
        <level>{{ clickhouse_log_level }}</level>
    </logger>

    <!-- The delay during which a dropped table can be restored using the UNDROP statement (in seconds) -->
    <database_atomic_delay_before_drop_table_sec>{{ clickhouse_database_atomic_delay_before_drop_table_sec }}</database_atomic_delay_before_drop_table_sec>
</clickhouse>
{%- elif clickhouse_config_format == 'yaml' -%}
# Server Configuration
# Generated by Ansible - ansible-role-clickhouse

clickhouse:
  # Maximum number of simultaneously processed requests
  max_concurrent_queries: {{ clickhouse_max_concurrent_queries }}

  # Number of threads to handle async inserts
  async_insert_threads: {{ clickhouse_async_insert_threads }}

  # Number of threads to perform background operations (merges, mutations, fetches)
  background_pool_size: {{ clickhouse_background_pool_size }}

  # Maximum number of inbound connections
  max_connections: {{ clickhouse_max_connections }}

  # Log level. Acceptable values: none, fatal, critical, error, warning, notice, information, debug, trace, test
  logger:
    level: {{ clickhouse_log_level }}

  # The delay during which a dropped table can be restored using the UNDROP statement (in seconds)
  database_atomic_delay_before_drop_table_sec: {{ clickhouse_database_atomic_delay_before_drop_table_sec }}
{%- endif -%}

